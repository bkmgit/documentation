---
description: >-
  In OpenCRVS v1.5.0 we have refactored the "workflow" microservice and
  deprecated the backend dependency on OpenHIM.  This has vastly improved the
  performance of the platform.
---

# v1.5.0 Release notes

### Breaking changes

*   **Upgrade node version to 18**

    This version enforces environment to have Node 18 installed (supported until April 2025) and removes support for Node 16

    * Use nvm to upgrade your local development environment to use node version `18.19.x.`
    * Specified operating systems in js modules as `darwin, linux`
    * Dev scripts and Vite run with an environment variable `NODE_OPTIONS=--dns-result-order=ipv4first` to resolve ipv4 addresses for `localhost` to support systems that resolves ipv6 addresses by default in Node versions >=17
*   **Update the certificate preview mechanism**

    In effort of minimizing JavaScript-bundle size, we have streamlined the way how review certificate -page renders certificates. In case the images in your certificates are previewing blurry, you need to update your SVG-certificates to print QR-codes and other images directly with `<image width="36" height="36" xlink:href="{{qrCode}}" x="500" y="770"></image>` instead of the more complicated `<rect fill="url(#pattern)"></rect>` -paradigm. This doesn't affect printed certificates as they are still created as previously.
*   **Move default address generation to country-config**

    We are dropping support for 'agentDefault' to be used as initial value for SELECT\_WITH\_DYNAMIC\_OPTIONS type of fields. The country config package now must return the form with prepopulated initial values to show default addresses.
*   **Remove system admin UI items: Application, Certificates, User roles, Informant notifications**

    We have now moved to configuring these items away from the UI in favour of directly editing these from country configuration repository in code - specifically in application-config-default.ts.

### New features

* The login and client application loading experience has improved. A loading bar appears before the javaScript bundle has loaded and this transitions when fetching records. [#6641](https://github.com/opencrvs/opencrvs-core/issues/6641)
* Support for landscape certificate templates.
* Allow defining maxLength attribute for number type fields .[#6356](https://github.com/opencrvs/opencrvs-core/issues/6356)
* A new certificate handlebar for registration fees has been added `registrationFees` [#6817](https://github.com/opencrvs/opencrvs-core/issues/6817)
* A new certificate handlebar for logged-in user details has been added `loggedInUser` [#6529](https://github.com/opencrvs/opencrvs-core/issues/6529)
* Two new properties to this form field are available: `DOCUMENT_UPLOADER_WITH_OPTION`
  * `compressImagesToSizeMB` : An optional prop of number type to define a compressed size. Compression is ignored when the input file is already smaller or equal of the given value or a falsy given value.
  * `maxSizeMB`: An optional validation prop to prevent input of a file bigger than a defined value.
* If a country doesnt wish to use Sentry for logging errors, the SENTRY\_DSN variable is now optional and the LogRocket option has been deprecated due to lack of demand.
* Given that upon an upgrade between versions of OpenCRVS, that users cache is cleared, it is important to inform staff to submit any draft applications before the upgrade date.  We introduced an "Email all users" feature so that National System Admins can send all staff messages.  This feature can be used for any other all staff comms that are deemed required.

<figure><img src="../../.gitbook/assets/Screenshot 2024-06-25 at 17.12.54.png" alt=""><figcaption></figcaption></figure>

* [OpenHIM](https://openhim.org/) is an Open Source middleware component designed for managing FHIR interoperability between disparate systems as part of the OpenHIE architectural specification.  We had been using this component in a much more fundamental way to monitor microservice comms in a similar fashion to Amazon SQS.  But the performance of OpenHIM added an unintended performance burden adding 200 m/s to every interaction. Cumulatively this was negatively affecting user experience and therefore we decided to deprecate it.  Interested implementers are free to re-introduce OpenHIM should they wish to use it as an interoperability layer without affecting the performance of OpenCRVS now that our architecture doesnt depen on it. The openhim db is kept for backwards compatibility reasons and will be removed in v1.6

**Infrastructure**

* Treat backup host identically to other hosts. To migrate:
  1. Move all inventory files (qa.yml, production.yml...) from `infrastructure/server-setup` to `infrastructure/server-setup/inventory`
  2. Run environment creator for your backup server `yarn environment:init --environment=backup`
* Allow using staging to both period restore of production backup and also for backing up its own data to a different location using `backup_server_remote_target_directory` and `backup_server_remote_source_directory` ansible variables. This use case is mostly meant for OpenCRVS team internal use.
* Automate SSH key exchange between application and backup server. For staging servers, automatically fetch production backup encryption key if periodic restore is enabled
* Improved support for non-22 SSH port
